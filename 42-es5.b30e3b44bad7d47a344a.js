function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{ErRH:function(e,t,i){"use strict";i.r(t),i.d(t,"HighLightTextsComponent",(function(){return u})),i.d(t,"HighLightTextsModule",(function(){return v}));var s=i("ofXK"),n=i("3Pt+"),r=i("fXoL"),o=i("XCOF");function a(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"span",7),r.Dc(2),r.Vb(),r.Tb()),2&e){var i=t.$implicit,s=t.index;r.Cb(1),r.Gb("js-elem"," "!==i)("high-light__texts-empty"," "===i),r.Db("data-order",s),r.Cb(1),r.Fc(" ",i," ")}}function h(e,t){if(1&e&&(r.Ub(0),r.Cc(1,a,3,6,"ng-container",6),r.Tb()),2&e){var i=r.hc().$implicit;r.Cb(1),r.kc("ngForOf",i.valueArray)}}function l(e,t){if(1&e){var i=r.Xb();r.Wb(0,"div",3),r.ec("mousemove",(function(e){r.vc(i);var s=t.index;return r.hc(2).mousemove(e,s)}))("mousedown",(function(e){return r.vc(i),r.hc(2).mousedown(e)}))("mouseup",(function(e){r.vc(i);var s=t.index;return r.hc(2).mouseup(e,s)}))("mouseleave",(function(){r.vc(i);var e=t.index;return r.hc(2).mouseleave(e)}))("touchend",(function(e){r.vc(i);var s=t.index;return r.hc(2).mouseup(e,s)}))("touchstart",(function(e){return r.vc(i),r.hc(2).mousedown(e)}))("touchleave",(function(){r.vc(i);var e=t.index;return r.hc(2).mouseleave(e)})),r.Cc(1,h,2,1,"ng-container",4),r.Rb(2,"canvas",5),r.Vb()}if(2&e){var s=t.$implicit;r.Cb(1),r.kc("ngIf",s.valueArray)}}function c(e,t){if(1&e&&(r.Wb(0,"div",1),r.Cc(1,l,3,1,"div",2),r.Vb()),2&e){var i=r.hc();r.Cb(1),r.kc("ngForOf",i.highLightTextsArray)}}var u=function(){var e=function(){function e(t){_classCallCheck(this,e),this.exerciseDataService=t,this.saveCanvasElems=[],this.saveWrappersElems=[],this.saveuserAnswers={},this.position={x1:null,y1:null,x2:null,y2:null},this.saveTouchPosition={x:null,y:null},this.lineHeight={border:null,height:null},this.saveLines={}}return _createClass(e,[{key:"ngOnChanges",value:function(){var e=this;if(this.list.sort((function(e,t){return e.Order-t.Order})),this.isCorrectValues){var t,i,s;console.log(this.list);var n=[];this.list.forEach((function(r,o){var a="";if(e.saveWrappersElems[o/2]&&(t=e.saveWrappersElems[o/2].getElementsByClassName("js-elem")),Array.from(t).forEach((function(e){a+=e.innerText})),a.includes(r.CorrectValue.replace(/\s/g,""))){for(var h=r.CorrectValue.replace(/\s/g,""),l=t.length,c=0;l>0;){var u=t[c];if(i!==u&&u.innerText===h[0]){i=u,n.push(t[c]);break}c++,l--}for(var v=t.length,g=0;v>0;){var p=t[g];if(s!==p&&p.innerText===h[h.length-1]){s=p,n.push(t[g]);break}g++,v--}}})),this.saveLines={};var r=0;for(var o in n.forEach((function(t,i){if(i%4==0){var s={x1:e.getCenterPosition(t).x,y1:e.getCenterPosition(t).y,x2:e.getCenterPosition(n[i+1]).x,y2:e.getCenterPosition(t).y,isOneColor:!0};e.saveLines[r++]=s}else{var o={x1:e.getCenterPosition(n[i-1]).x,y1:e.getCenterPosition(t).y,x2:e.getCenterPosition(n[i]).x,y2:e.getCenterPosition(t).y,isOneColor:!1};e.saveLines[r]=o}})),this.saveLines)if(Object.prototype.hasOwnProperty.call(this.saveLines,o)&&this.saveCanvasElems[o]){var a=this.saveCanvasElems[o].getContext("2d");this.paintSaveLines(a,+o)}}else{var h=[];this.list.forEach((function(e){var t={IsCorrect:null,CorrectValue:null,valueArray:e.Value.split(""),order:e.Order};h.push(t)})),this.highLightTextsArray=h}}},{key:"mousemove",value:function(e,t){if(this.mouseStart){var i=document.elementFromPoint(this.getEventPosition(e).clientX,this.getEventPosition(e).clientY);if(" "!==i.innerHTML&&i.classList.contains("high-light__texts-letter")){var s=this.saveWrappersElems[t].getBoundingClientRect().left,n=this.saveWrappersElems[t].getBoundingClientRect().top,r=this.position.x1-s,o=this.position.y1-n,a=this.getCenterPosition(i).x-s,h=this.getCenterPosition(i).y-n,l=this.saveCanvasElems[t].getContext("2d");this.clearCanvas(t),this.paintLine(l,r,o,a,h,!this.saveLines[t]),this.paintSaveLines(l,t)}}}},{key:"mousedown",value:function(e){this.mouseStart=!0;var t=document.elementFromPoint(this.getEventPosition(e).clientX,this.getEventPosition(e).clientY);this.position.x1=this.getCenterPosition(t).x,this.position.y1=this.getCenterPosition(t).y}},{key:"mouseup",value:function(e,t){this.clearCanvas(t);var i=this.saveCanvasElems[t].getContext("2d");if(this.paintSaveLines(i,t),this.mouseStart){var s=document.elementFromPoint(this.getEventPosition(e).clientX,this.getEventPosition(e).clientY);if(" "!==s.innerHTML)if(s.classList.contains("high-light__texts-letter")){this.mouseStart=!1;var n={x1:null,y1:null,x2:null,y2:null,isOneColor:null};if(n.x1=this.position.x1,n.y1=this.position.y1,n.x2=this.getCenterPosition(s).x,n.y2=this.getCenterPosition(s).y,this.saveLines[t]){var r=this.saveLines[t].x1<this.saveLines[t].x2?this.saveLines[t].x1:this.saveLines[t].x2,o=this.saveLines[t].x1>this.saveLines[t].x2?this.saveLines[t].x1:this.saveLines[t].x2,a=n.x1<n.x2?n.x1:n.x2,h=n.x1>n.x2?n.x1:n.x2;(a>h?h:a)<=(r>o?r:o)&&(delete this.saveLines[t],delete this.saveLines[t+"x"],delete this.saveuserAnswers[t+1+".1"],delete this.saveuserAnswers[t+1+".2"])}for(var l in this.saveLines[t]?(this.saveLines[t+"x"]=n,n.isOneColor=!1,this.getUserValues(n.x1,n.x2,n.y1,t+1+".2",t)):(this.saveLines[t]=n,n.isOneColor=!0,this.getUserValues(n.x1,n.x2,n.y1,t+1+".1",t)),this.saveuserAnswers)Object.prototype.hasOwnProperty.call(this.saveuserAnswers,l)&&(-1!==l.indexOf(".2")?this.getUserResult(this.saveuserAnswers[l],2*+l[0]):this.getUserResult(this.saveuserAnswers[l],2*+l[0]-1));this.clearCanvas(t),this.paintSaveLines(i,t)}else this.mouseStart=!1;else this.mouseStart=!1}}},{key:"paintSaveLines",value:function(e,t){var i=this.saveWrappersElems[t].getBoundingClientRect().left,s=this.saveWrappersElems[t].getBoundingClientRect().top;for(var n in this.saveLines)if(Object.prototype.hasOwnProperty.call(this.saveLines,n)){var r=this.saveLines[n];Object.prototype.hasOwnProperty.call(r,"isCorrect")&&(e.strokeStyle=this.saveLines[n].isCorrect?"#92d050":"#FBACAC"),this.paintLine(e,r.x1-i,r.y1-s,r.x2-i,r.y2-s,r.isOneColor)}}},{key:"getUserValues",value:function(e,t,i,s,n){for(var r=e<t?e:t,o=e>t?e:t,a="",h={};r<=o;){var l=document.elementFromPoint(r,i);h[l.getAttribute("data-order")]=l.innerText,r+=this.elemWidth}var c=document.elementFromPoint(o,i);for(var u in h[c.getAttribute("data-order")]=c.innerText,h)Object.prototype.hasOwnProperty.call(h,u)&&"null"!==u&&(a+=h[u]);this.saveuserAnswers[s]=a}},{key:"getEventPosition",value:function(e){var t,i;return"mousemove"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type||(t=e.clientX,i=e.clientY),"touchmove"!==e.type&&"touchstart"!==e.type||(t=e.touches[0].clientX,i=e.touches[0].clientY,this.saveTouchPosition.x=e.touches[0].clientX,this.saveTouchPosition.y=e.touches[0].clientY),"touchend"===e.type?{clientX:this.saveTouchPosition.x,clientY:this.saveTouchPosition.y}:{clientX:t,clientY:i}}},{key:"getCenterPosition",value:function(e){var t=e.getBoundingClientRect().height/1.79,i=e.getBoundingClientRect().width/2,s=e.getBoundingClientRect().top;return{x:e.getBoundingClientRect().left+i,y:s+t}}},{key:"clearCanvas",value:function(e){this.saveCanvasElems[e].getContext("2d").clearRect(0,0,this.saveWrappersElems[e].getBoundingClientRect().width,this.saveWrappersElems[e].getBoundingClientRect().height)}},{key:"mouseleave",value:function(e){if(this.mouseStart){this.mouseStart=!1,this.clearCanvas(e);var t=this.saveCanvasElems[e].getContext("2d");this.paintSaveLines(t,e)}}},{key:"paintLine",value:function(e,t,i,s,n,r){e.lineWidth=this.lineHeight.border,e.strokeStyle=r?"#025b51":"#893203",e.beginPath(),e.moveTo(t,i),e.lineTo(s,n),e.stroke(),e.lineWidth=this.lineHeight.height,e.strokeStyle=r?"#bce2c0":"#f6cf99",e.beginPath(),e.moveTo(t,i),e.lineTo(s,n),e.stroke()}},{key:"getUserResult",value:function(e,t){this.exerciseDataService.subject.next({Type:"HighlightTexts",Order:this.Order,Data:{Order:t,Value:e}})}},{key:"ngAfterViewInit",value:function(){var e=this,t=document.getElementsByClassName("high-light__texts-wrapper"),i=document.getElementsByClassName("high-light__canvas"),s=document.getElementsByClassName("high-light__texts-letter")[0].getBoundingClientRect();this.lineHeight.height=s.height-s.height/100*30,this.lineHeight.border=s.height-s.height/100*15,this.elemWidth=s.width,Array.from(t).forEach((function(t,s){var n=i[s],r=t.getBoundingClientRect().width,o=t.getBoundingClientRect().height;n.width=r,n.height=o;var a=n.getContext("2d");a.lineCap="round",a.globalAlpha=.5,e.saveCanvasElems.push(n),e.saveWrappersElems.push(t)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Qb(o.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-high-light-texts"]],inputs:{isCorrectValues:"isCorrectValues",Order:"Order",list:"list"},features:[r.Ab],decls:1,vars:1,consts:[["class","high-light-wrapper m-auto",4,"ngIf"],[1,"high-light-wrapper","m-auto"],["class","high-light__texts-wrapper big-f-size text-center",3,"mousemove","mousedown","mouseup","mouseleave","touchend","touchstart","touchleave",4,"ngFor","ngForOf"],[1,"high-light__texts-wrapper","big-f-size","text-center",3,"mousemove","mousedown","mouseup","mouseleave","touchend","touchstart","touchleave"],[4,"ngIf"],[1,"canvas","high-light__canvas"],[4,"ngFor","ngForOf"],[1,"high-light__texts-letter"]],template:function(e,t){1&e&&r.Cc(0,c,2,1,"div",0),2&e&&r.kc("ngIf",t.highLightTextsArray)},directives:[s.j,s.i],styles:[".high-light-wrapper[_ngcontent-%COMP%]{width:25vw}.high-light__texts-wrapper[_ngcontent-%COMP%]{padding:1vh 2vw;border-radius:10vh;width:100%;position:relative}.high-light__texts-wrapper[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:2vh}.high-light__texts-letter[_ngcontent-%COMP%]{display:inline-block;width:.9em;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.high-light__texts-empty[_ngcontent-%COMP%]{display:inline-block;width:.25em}.canvas[_ngcontent-%COMP%]{z-index:-1;position:absolute;top:0;left:0;background:#fbf7cb;border-radius:10vh}"]}),e}(),v=function(){var e=function(){function e(t){_classCallCheck(this,e),this.componentFactoryResolver=t}return _createClass(e,[{key:"resolveComponent",value:function(){return this.componentFactoryResolver.resolveComponentFactory(u)}}]),e}();return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)(r.ac(r.j))},imports:[[s.b,n.n]]}),e}()}}]);