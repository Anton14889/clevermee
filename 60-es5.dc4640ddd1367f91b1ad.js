function _classCallCheck(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(o,e){for(var r=0;r<e.length;r++){var c=e[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}function _createClass(o,e,r){return e&&_defineProperties(o.prototype,e),r&&_defineProperties(o,r),o}(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{MycW:function(o,e,r){"use strict";r.r(e),r.d(e,"PaintTheChocoComponent",(function(){return v})),r.d(e,"PaintTheChocoModule",(function(){return p}));var c=r("ofXK"),t=r("3Pt+"),n=r("fXoL"),i=r("XCOF"),a=r("TznM"),l=["mouseColorElem"],s=["paintChoco"];function u(o,e){if(1&o){var r=n.Xb();n.Wb(0,"td",15),n.ec("click",(function(o){n.vc(r);var c=e.index,t=n.hc().index,i=n.hc().index;return[n.hc(2).addPaintChocoColor(o.target,i,t,c)]})),n.Vb()}if(2&o){var c=e.$implicit;n.Bc("background",c.activeColor.color,n.Jb),n.Gb("paint-choco__ball--active",c.activeColor.color)}}function h(o,e){if(1&o&&(n.Wb(0,"tr",13),n.Cc(1,u,1,4,"td",14),n.Vb()),2&o){var r=e.$implicit;n.Cb(1),n.kc("ngForOf",r)}}function f(o,e){if(1&o&&(n.Wb(0,"table",11),n.Cc(1,h,2,1,"tr",12),n.Vb()),2&o){var r=e.$implicit;n.Cb(1),n.kc("ngForOf",r)}}function d(o,e){if(1&o){var r=n.Xb();n.Wb(0,"div",16),n.ec("click",(function(o){n.vc(r);var c=e.index;return n.hc(2).addActiveClass(o.target,c)})),n.Vb()}2&o&&n.Bc("background",e.$implicit.activeColor.color,n.Jb)}function C(o,e){if(1&o){var r=n.Xb();n.Wb(0,"div",1,2),n.ec("mousemove",(function(o){return n.vc(r),n.hc().mouseColor(o)}))("touchmove",(function(o){return n.vc(r),n.hc().mouseColor(o)})),n.Wb(2,"div",3),n.Cc(3,f,2,1,"table",4),n.Vb(),n.Wb(4,"div",5),n.Wb(5,"div",6),n.Rb(6,"img",7),n.Vb(),n.Cc(7,d,1,2,"div",8),n.Vb(),n.Rb(8,"div",9,10),n.Vb()}if(2&o){var c=n.hc();n.Cb(3),n.kc("ngForOf",c.PaintChocoArray),n.Cb(3),n.kc("src",c.imgSrc,n.xc),n.Cb(1),n.kc("ngForOf",c.resultColors),n.Cb(1),n.Bc("background",c.chocoColor,n.Jb),n.Gb("mouse-color_border",c.chocoColor)}}var v=function(){var o=function(){function o(e,r){_classCallCheck(this,o),this.exerciseDataService=e,this.resourceLoadsService=r,this.colors=[{color:"#10afaa",bucketImg:"BucketBlue",colorName:"Blue",order:null},{color:"#ff712d",bucketImg:"BucketOrange",colorName:"Orange",order:null},{color:"#a64ac9",bucketImg:"BucketPurple",colorName:"Purple",order:null},{color:"#fccd05",bucketImg:"BucketYellow",colorName:"Yellow",order:null}],this.imgSrc=r.getExerciseImage(this.colors[0].bucketImg)}return _createClass(o,[{key:"ngOnChanges",value:function(){var o=this;if(this.list)if(this.list.sort((function(o,e){return o.Order-e.Order})),this.isCorrectValues){this.PaintChocoArray.forEach((function(o){o.forEach((function(o){o.forEach((function(o){o.activeColor.color=null,o.activeColor.colorName=null}))}))}));var e=1;this.list.forEach((function(r,c){o.resultColors.forEach((function(c){c.order===r.Order&&function(){for(var t=+r.CorrectValue,n=0;t>0;)o.PaintChocoArray.forEach((function(o){o.forEach((function(o){o.forEach((function(o){o.order===e&&n<+r.CorrectValue&&(o.CorrectValue=r.CorrectValue,o.IsCorrect=r.IsCorrect,o.activeColor.color=c.activeColor.color,o.activeColor.colorName=c.activeColor.colorName,e++,n++)}))}))})),t--}()}))}))}else{var r,c=[];this.list.forEach((function(o){"NumberOfChocos"===o.Metric&&(r=o.Value),"Color"===o.Metric&&c.push({CorrectValue:null,IsCorrect:null,defaultValue:o.Value?o.Value:null,order:o.Order,activeColor:{color:"",colorName:""},activeOrder:null})}));for(var t=r,n=0,i=[],a=0;t>0;){i.push([]);for(var l=3;l>=0;)l%2==0&&i[n].push([{CorrectValue:null,IsCorrect:null,defaultValue:null,order:++a,activeColor:{color:"",colorName:""},activeOrder:null},{CorrectValue:null,IsCorrect:null,defaultValue:null,order:++a,activeColor:{color:"",colorName:""},activeOrder:null}]),l--;n++,t--}var s=[];c.forEach((function(e){o.colors.forEach((function(o){e.defaultValue===o.colorName&&(o.order=e.order,e.activeColor.color=o.color,e.activeColor.colorName=o.colorName,s.push(e))}))})),this.resultColors=s,this.PaintChocoArray=i}}},{key:"addActiveClass",value:function(o,e){if(!this.isCorrectValues){var r=document.getElementsByClassName("paint-choco__color-picker");Array.from(r).forEach((function(o){o.classList.remove("paint-choco__color-picker--active")})),o.classList.add("paint-choco__color-picker--active"),this.imgSrc=this.resourceLoadsService.getExerciseImage(this.colors[e].bucketImg),this.chocoColor=this.colors[e].color,this.colorOrder=e+1,("ontouchstart"in window||navigator.msMaxTouchPoints)&&(this.mouseColorElem.nativeElement.style.display="none")}}},{key:"addPaintChocoColor",value:function(o,e,r,c){var t=this;this.isCorrectValues||this.chocoColor&&(this.resultColors.forEach((function(o){o.activeColor.color===t.chocoColor&&(t.PaintChocoArray[e][r][c].activeColor.color=o.activeColor.color,t.PaintChocoArray[e][r][c].activeColor.colorName=o.activeColor.colorName,t.PaintChocoArray[e][r][c].activeOrder=o.order)})),this.getUserResult())}},{key:"mouseColor",value:function(o){if(!(this.isCorrectValues||o.clientX>this.paintChoco.nativeElement.getBoundingClientRect().right)){var e=o.clientX-this.paintChoco.nativeElement.getBoundingClientRect().left,r=o.clientY-this.paintChoco.nativeElement.getBoundingClientRect().top,c=this.mouseColorElem.nativeElement.getBoundingClientRect().width;this.mouseColorElem.nativeElement.style.left=e+c+"px",this.mouseColorElem.nativeElement.style.top=r+"px"}}},{key:"getUserResult",value:function(){var o={Type:"PaintTheChoco",Order:this.Order,Data:{Order:null,Value:null}},e={};for(var r in this.PaintChocoArray.forEach((function(o){o.forEach((function(o){o.forEach((function(o){o.activeColor.color&&(e[o.activeOrder]=0)}))}))})),this.PaintChocoArray.forEach((function(o){o.forEach((function(o){o.forEach((function(o){o.activeColor.color&&e[o.activeOrder]++}))}))})),e)Object.prototype.hasOwnProperty.call(e,r)&&(o.Data.Order=r,o.Data.Value=e[r],this.exerciseDataService.subject.next(o))}}]),o}();return o.\u0275fac=function(e){return new(e||o)(n.Qb(i.a),n.Qb(a.a))},o.\u0275cmp=n.Kb({type:o,selectors:[["app-paint-the-choco"]],viewQuery:function(o,e){var r;1&o&&(n.Hc(l,!0),n.Hc(s,!0)),2&o&&(n.rc(r=n.fc())&&(e.mouseColorElem=r.first),n.rc(r=n.fc())&&(e.paintChoco=r.first))},inputs:{isCorrectValues:"isCorrectValues",Order:"Order",list:"list"},features:[n.Ab],decls:1,vars:1,consts:[["class","paint-choco__wrapper",3,"mousemove","touchmove",4,"ngIf"],[1,"paint-choco__wrapper",3,"mousemove","touchmove"],["paintChoco",""],[1,"paint-choco__table-wrapper","d-flex","align-items-center","justify-content-center"],["class","paint-choco__table d-flex flex-column",4,"ngFor","ngForOf"],[1,"paint-choco__color-picker-wrapper","d-flex","justify-content-between"],[1,"paint-choco__bucket-img-wrapper"],[1,"paint-choco__bucket-img",3,"src"],["class","paint-choco__color-picker",3,"background","click",4,"ngFor","ngForOf"],[1,"mouse-color"],["mouseColorElem",""],[1,"paint-choco__table","d-flex","flex-column"],["class","paint-choco__tr",4,"ngFor","ngForOf"],[1,"paint-choco__tr"],["class","paint-choco__td text-center big-f-size",3,"background","paint-choco__ball--active","click",4,"ngFor","ngForOf"],[1,"paint-choco__td","text-center","big-f-size",3,"click"],[1,"paint-choco__color-picker",3,"click"]],template:function(o,e){1&o&&n.Cc(0,C,10,7,"div",0),2&o&&n.kc("ngIf",e.PaintChocoArray)},directives:[c.j,c.i],styles:["[_nghost-%COMP%]{width:100%;margin:auto}.paint-choco__wrapper[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}.paint-choco__table-wrapper[_ngcontent-%COMP%]{margin:5vh 0}.paint-choco__table[_ngcontent-%COMP%]:not(:last-child){margin-right:2vw}.paint-choco__tr[_ngcontent-%COMP%]:last-child   .paint-choco__td[_ngcontent-%COMP%]{border-top:none}.paint-choco__td[_ngcontent-%COMP%]{border:.5vh solid #bc8425;width:4vw;height:4vw;background:#e3b86e;cursor:pointer;transition:background .2s}.paint-choco__color-picker-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#dad8d9;padding:.5vw 1.5vw;border-radius:10vh;margin:auto}.paint-choco__color-picker[_ngcontent-%COMP%]{width:2.5vw;height:2.5vw;border-radius:50%;cursor:pointer}.paint-choco__color-picker[_ngcontent-%COMP%]:not(:last-child){margin-right:1vw}.paint-choco__color-picker--active[_ngcontent-%COMP%]{border:.3vw solid #4d4d4d}.paint-choco__bucket-img[_ngcontent-%COMP%]{width:100%;height:100%}.paint-choco__bucket-img-wrapper[_ngcontent-%COMP%]{width:2.5vw;height:2.5vw;margin-right:1vw}.mouse-color[_ngcontent-%COMP%]{padding:1vh;position:absolute}.mouse-color_border[_ngcontent-%COMP%]{border:.1vw solid #fff}"]}),o}(),p=function(){var o=function(){function o(e){_classCallCheck(this,o),this.componentFactoryResolver=e}return _createClass(o,[{key:"resolveComponent",value:function(){return this.componentFactoryResolver.resolveComponentFactory(v)}}]),o}();return o.\u0275mod=n.Ob({type:o}),o.\u0275inj=n.Nb({factory:function(e){return new(e||o)(n.ac(n.j))},imports:[[c.b,t.n]]}),o}()}}]);