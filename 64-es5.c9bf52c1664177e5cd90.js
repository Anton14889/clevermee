function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{SgJJ:function(t,e,r){"use strict";r.r(e),r.d(e,"PyramidChartComponent",(function(){return m})),r.d(e,"PyramidChartModule",(function(){return C}));var n=r("ofXK"),i=r("3Pt+"),a=r("fXoL"),o=r("XCOF"),c=["wrapper"],l=["canvas"];function p(t,e){if(1&t&&a.Rb(0,"span",13),2&t){var r=a.hc(2).$implicit;a.Gb("right_total",4===r.order),a.kc("innerHTML","="+r.totalValue,a.wc)}}function s(t,e){if(1&t&&a.Rb(0,"span",13),2&t){var r=a.hc(2).$implicit;a.Gb("right_total",4===r.order),a.kc("innerHTML",r.totalValue+"=",a.wc)}}function u(t,e){if(1&t){var r=a.Xb();a.Wb(0,"div",10),a.Wb(1,"input",11),a.ec("input",(function(t){a.vc(r);var e=a.hc().$implicit,n=a.hc(3);return[n.isIcon(t.target),n.getUserResult(t.target.value,e.order)]})),a.Vb(),a.Cc(2,p,1,3,"span",12),a.Cc(3,s,1,3,"span",12),a.Vb()}if(2&t){var n=a.hc().$implicit;a.Cb(1),a.Gb("input-disabled",n.defaultValue)("correct-exercise-answer",n.IsCorrect)("incorrect-exercise-answer",null!==n.IsCorrect&&!n.IsCorrect),a.kc("disabled",n.CorrectValue||n.defaultValue)("value",n.CorrectValue||n.defaultValue),a.Cb(1),a.kc("ngIf",n.totalValue&&7!==n.order),a.Cb(1),a.kc("ngIf",n.totalValue&&7===n.order)}}function d(t,e){if(1&t&&(a.Wb(0,"span",14),a.Dc(1),a.Vb()),2&t){var r=a.hc().$implicit;a.Cb(1),a.Fc(" ",r," ")}}function h(t,e){if(1&t&&(a.Ub(0),a.Cc(1,u,4,10,"div",8),a.Cc(2,d,2,1,"span",9),a.Tb()),2&t){var r=e.$implicit;a.Cb(1),a.kc("ngIf",r.order),a.Cb(1),a.kc("ngIf",!r.order)}}function f(t,e){if(1&t&&(a.Wb(0,"div",6),a.Cc(1,h,3,2,"ng-container",7),a.Vb()),2&t){var r=e.$implicit;a.Cb(1),a.kc("ngForOf",r)}}function g(t,e){if(1&t&&(a.Wb(0,"div",1,2),a.Cc(2,f,2,1,"div",3),a.Rb(3,"canvas",4,5),a.Vb()),2&t){var r=a.hc();a.Cb(2),a.kc("ngForOf",r.pyramidChartArray)}}var m=function(){var t=function(){function t(e){_classCallCheck(this,t),this.exerciseDataService=e}return _createClass(t,[{key:"ngOnChanges",value:function(){var t=this;if(this.list.sort((function(t,e){return t.Order-e.Order})),this.isCorrectValues)this.list.forEach((function(e){t.pyramidChartArray.forEach((function(t){t.forEach((function(t){t.order===e.Order&&(t.CorrectValue=e.CorrectValue,t.IsCorrect=e.IsCorrect)}))}))}));else{var e=[],r=[],n=[];this.list.forEach((function(t){var i={CorrectValue:null,IsCorrect:null,defaultValue:null,totalValue:null,symbolValue:null,order:t.Order};"SymbolValue"===t.Metric&&(i.symbolValue=t.Value,e.push(i)),"TotalValue"===t.Metric&&(i.totalValue=t.Value,n.push(i)),"DefaultValue"===t.Metric&&(i.defaultValue=t.Value,r.push(i))})),e[2].order=2,e[4].order=3,e[8].order=4,e[1].order=9,e[3].order=8,e[5].order=7,e[6].order=6,e[7].order=5,n[1].order=4,n[2].order=7;var i=[];e.forEach((function(t){i.push(t.symbolValue),r.forEach((function(e){e.order===t.order&&(t.defaultValue=e.defaultValue)})),n.forEach((function(e){e.order===t.order&&(t.totalValue=e.totalValue)}))}));var a=[[],[],[],[],[],[],[],[]];a[0].push(e[0]),a[2].push(e[1]),a[2].push(e[2]),a[4].push(e[3]),a[4].push(e[4]),a[6].push(e[5]),a[6].push(e[6]),a[6].push(e[7]),a[6].push(e[8]),a[1].push(i[0]),a[1].push(i[1]),a[3].push(i[2]),a[3].push(i[3]),a[5].push(i[4]),a[5].push(i[5]),a[7].push(i[6]),a[7].push(i[7]),a[7].push(i[8]),this.pyramidChartArray=a}}},{key:"getUserResult",value:function(t,e){this.exerciseDataService.subject.next({Type:"PyramidChart",Order:this.Order,Data:{Order:e,Value:t}})}},{key:"isIcon",value:function(t){t.value?t.classList.remove("form_input-edit-icon"):t.classList.add("form_input-edit-icon")}},{key:"ngAfterViewInit",value:function(){this.canvas.nativeElement.width=this.wrapper.nativeElement.getBoundingClientRect().width,this.canvas.nativeElement.height=this.wrapper.nativeElement.getBoundingClientRect().height;var t=this.canvas.nativeElement.getContext("2d");t.strokeStyle="#0daca7",t.lineWidth=this.windowWidth()/100/2;var e=this.wrapper.nativeElement.getElementsByClassName("pyramid-chart_input "),r=e[0],n=e[5],i=e[8],a=r.getBoundingClientRect().left-this.wrapper.nativeElement.getBoundingClientRect().left+r.getBoundingClientRect().width/2,o=r.getBoundingClientRect().height/2,c=n.getBoundingClientRect().left-this.wrapper.nativeElement.getBoundingClientRect().left+n.getBoundingClientRect().width/2,l=n.getBoundingClientRect().top-this.wrapper.nativeElement.getBoundingClientRect().top+n.getBoundingClientRect().height/2,p=i.getBoundingClientRect().left-this.wrapper.nativeElement.getBoundingClientRect().left+i.getBoundingClientRect().width/2;t.beginPath(),t.moveTo(a,o),t.lineTo(c,l),t.lineTo(p,l),t.lineTo(a,o),t.stroke()}},{key:"windowWidth",value:function(){var t=window,e=document,r=e.documentElement,n=e.getElementsByTagName("body")[0];return t.innerWidth||r.clientWidth||n.clientWidth}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Qb(o.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["app-pyramid-chart"]],viewQuery:function(t,e){var r;1&t&&(a.Hc(c,!0),a.Hc(l,!0)),2&t&&(a.rc(r=a.fc())&&(e.wrapper=r.first),a.rc(r=a.fc())&&(e.canvas=r.first))},inputs:{isCorrectValues:"isCorrectValues",Order:"Order",list:"list"},features:[a.Ab],decls:1,vars:1,consts:[["class","pyramid-chart-wrapper",4,"ngIf"],[1,"pyramid-chart-wrapper"],["wrapper",""],["class","pyramid-chart__row-wrapper d-flex align-items-center mx-auto ",4,"ngFor","ngForOf"],[1,"canvas"],["canvas",""],[1,"pyramid-chart__row-wrapper","d-flex","align-items-center","mx-auto"],[4,"ngFor","ngForOf"],["class","form_input-wrapper pyramid-chart_input-wrapper",4,"ngIf"],["class","pyramid-chart__symbol big-f-size",4,"ngIf"],[1,"form_input-wrapper","pyramid-chart_input-wrapper"],["type","text",1,"form_input","form_input-edit-icon","pyramid-chart_input","text-center","big-f-size",3,"disabled","value","input"],["class","pyramid-chart__total big-f-size",3,"right_total","innerHTML",4,"ngIf"],[1,"pyramid-chart__total","big-f-size",3,"innerHTML"],[1,"pyramid-chart__symbol","big-f-size"]],template:function(t,e){1&t&&a.Cc(0,g,5,1,"div",0),2&t&&a.kc("ngIf",e.pyramidChartArray)},directives:[n.j,n.i],styles:["[_nghost-%COMP%]{width:100%;padding:4vh 0}.pyramid-chart-wrapper[_ngcontent-%COMP%]{position:relative;width:95%;margin:0 auto;line-height:0}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-of-type(2){width:45%;padding:1vh 0 3vh}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-child(3){width:50%}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-of-type(4){width:93%;padding:1vh 0 3vh}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-child(6){padding:1vh 0 3vh}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-child(6)   .pyramid-chart__symbol[_ngcontent-%COMP%]:first-child{margin-left:13.5%}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-child(6)   .pyramid-chart__symbol[_ngcontent-%COMP%]:last-child{margin-left:auto;margin-right:13.5%}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-child(8){width:75%;z-index:-1}.pyramid-chart_input-wrapper[_ngcontent-%COMP%]{width:10vw;margin:auto}.pyramid-chart__symbol[_ngcontent-%COMP%]{display:block;margin:auto}.pyramid-chart__total[_ngcontent-%COMP%]{position:absolute;line-height:0}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:first-of-type   .pyramid-chart_input-wrapper[_ngcontent-%COMP%]   .pyramid-chart__total[_ngcontent-%COMP%]{top:-50%;right:-50%}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-of-type(7)   .pyramid-chart_input-wrapper[_ngcontent-%COMP%]   .pyramid-chart__total[_ngcontent-%COMP%]{bottom:-50%;left:-50%}.right_total[_ngcontent-%COMP%]{right:-50%;left:inherit!important}.canvas[_ngcontent-%COMP%]{position:absolute;left:0;top:0;z-index:-1}"]}),t}(),C=function(){var t=function(){function t(e){_classCallCheck(this,t),this.componentFactoryResolver=e}return _createClass(t,[{key:"resolveComponent",value:function(){return this.componentFactoryResolver.resolveComponentFactory(m)}}]),t}();return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)(a.ac(a.j))},imports:[[n.b,i.n]]}),t}()}}]);