(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{OGSr:function(o,r,t){"use strict";t.r(r),t.d(r,"PaintColarComponent",(function(){return C})),t.d(r,"PaintColarModule",(function(){return m}));var e=t("3Pt+"),c=t("ofXK"),l=t("fXoL"),a=t("XCOF"),i=t("TznM");const n=["mouseColorElem"],s=["paintColar"];function u(o,r){if(1&o){const o=l.Xb();l.Wb(0,"div",11),l.ec("click",(function(t){l.vc(o);const e=r.index;return l.hc(2).addPaintColor(t.target,e)})),l.Vb()}if(2&o){const o=r.$implicit;l.Bc("background",o.activeColor.color,l.Jb),l.Gb("paint-colar__ball--active",o.activeColor.color)}}function d(o,r){if(1&o){const o=l.Xb();l.Wb(0,"div",12),l.ec("click",(function(t){l.vc(o);const e=r.index;return l.hc(2).addActiveClass(t.target,e)})),l.Vb()}2&o&&l.Bc("background",r.$implicit.activeColor.color,l.Jb)}function p(o,r){if(1&o){const o=l.Xb();l.Wb(0,"div",1,2),l.ec("mousemove",(function(r){return l.vc(o),l.hc().mouseColor(r)}))("touchmove",(function(r){return l.vc(o),l.hc().mouseColor(r)})),l.Wb(2,"div",3),l.Cc(3,u,1,4,"div",4),l.Vb(),l.Wb(4,"div",5),l.Wb(5,"div",6),l.Rb(6,"img",7),l.Vb(),l.Cc(7,d,1,2,"div",8),l.Vb(),l.Rb(8,"div",9,10),l.Vb()}if(2&o){const o=l.hc();l.Cb(3),l.kc("ngForOf",o.PaintColarArray),l.Cb(3),l.kc("src",o.imgSrc,l.xc),l.Cb(1),l.kc("ngForOf",o.resultColors),l.Cb(1),l.Bc("background",o.ballColor,l.Jb),l.Gb("mouse-color_border",o.ballColor)}}let C=(()=>{class o{constructor(o,r){this.exerciseDataService=o,this.resourceLoadsService=r,this.colors=[{color:"#10afaa",bucketImg:"BucketBlue",colorName:"Blue",order:null},{color:"#ff712d",bucketImg:"BucketOrange",colorName:"Orange",order:null},{color:"#a64ac9",bucketImg:"BucketPurple",colorName:"Purple",order:null},{color:"#fccd05",bucketImg:"BucketYellow",colorName:"Yellow",order:null}],this.imgSrc=r.getExerciseImage(this.colors[0].bucketImg)}ngOnChanges(){if(!this.list)return;if(this.list.sort((o,r)=>o.Order-r.Order),this.isCorrectValues){this.PaintColarArray.forEach(o=>{o.activeColor.color=null,o.activeColor.colorName=null});let o=0;return void this.list.forEach(r=>{this.resultColors.forEach(t=>{if(t.order===r.Order){let e=+r.CorrectValue;for(;e>0;)this.PaintColarArray[o].CorrectValue=r.CorrectValue,this.PaintColarArray[o].IsCorrect=r.IsCorrect,this.PaintColarArray[o].activeColor.color=t.activeColor.color,this.PaintColarArray[o].activeColor.colorName=t.activeColor.colorName,e--,o++}})})}const o=[];let r;this.list.forEach(t=>{"NumberOfBalls"===t.Metric&&(r=t.Value),"Color"===t.Metric&&o.push({CorrectValue:null,IsCorrect:null,defaultValue:t.Value?t.Value:null,order:t.Order,activeColor:{color:"",colorName:""},activeOrder:null})});const t=[];let e=r,c=0;for(;e>0;){const o={CorrectValue:null,IsCorrect:null,value:null,order:++c,activeColor:{color:"",colorName:""},activeOrder:null};t.push(o),e--}const l=[];o.forEach(o=>{this.colors.forEach(r=>{o.defaultValue===r.colorName&&(r.order=o.order,o.activeColor.color=r.color,o.activeColor.colorName=r.colorName,l.push(o))})}),this.resultColors=l,this.PaintColarArray=t}addActiveClass(o,r){const t=document.getElementsByClassName("paint-colar__color-picker");Array.from(t).forEach(o=>{o.classList.remove("paint-colar__color-picker--active")}),o.classList.add("paint-colar__color-picker--active"),this.imgSrc=this.resourceLoadsService.getExerciseImage(this.colors[r].bucketImg),this.ballColor=this.colors[r].color,this.colorOrder=r+1,("ontouchstart"in window||navigator.msMaxTouchPoints)&&(this.mouseColorElem.nativeElement.style.display="none")}addPaintColor(o,r){this.ballColor&&(this.resultColors.forEach(o=>{o.activeColor.color===this.ballColor&&(this.PaintColarArray[r].activeColor.color=o.activeColor.color,this.PaintColarArray[r].activeColor.colorName=o.activeColor.colorName,this.PaintColarArray[r].activeOrder=o.order)}),this.getUserResult())}mouseColor(o){if(o.clientX>this.paintColar.nativeElement.getBoundingClientRect().right)return;const r=o.clientX-this.paintColar.nativeElement.getBoundingClientRect().left,t=o.clientY-this.paintColar.nativeElement.getBoundingClientRect().top,e=this.mouseColorElem.nativeElement.getBoundingClientRect().width;this.mouseColorElem.nativeElement.style.left=r+e+"px",this.mouseColorElem.nativeElement.style.top=t+"px"}getUserResult(){const o={Type:"PaintColar",Order:this.Order,Data:{Order:null,Value:null}},r={};this.PaintColarArray.forEach(o=>{o.activeColor&&(r[o.activeOrder]=0)}),this.PaintColarArray.forEach(o=>{o.activeColor&&r[o.activeOrder]++});for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(o.Data.Order=t,o.Data.Value=r[t],this.exerciseDataService.subject.next(o))}}return o.\u0275fac=function(r){return new(r||o)(l.Qb(a.a),l.Qb(i.a))},o.\u0275cmp=l.Kb({type:o,selectors:[["app-paint-colar"]],viewQuery:function(o,r){var t;1&o&&(l.Hc(n,!0),l.Hc(s,!0)),2&o&&(l.rc(t=l.fc())&&(r.mouseColorElem=t.first),l.rc(t=l.fc())&&(r.paintColar=t.first))},inputs:{isCorrectValues:"isCorrectValues",Order:"Order",list:"list"},features:[l.Ab],decls:1,vars:1,consts:[["class","paint-colar__wrapper d-flex flex-column align-items-center",3,"mousemove","touchmove",4,"ngIf"],[1,"paint-colar__wrapper","d-flex","flex-column","align-items-center",3,"mousemove","touchmove"],["paintColar",""],[1,"paint-colar__ball-wrapper"],["class","paint-colar__ball",3,"background","paint-colar__ball--active","click",4,"ngFor","ngForOf"],[1,"paint-colar__color-picker-wrapper","d-flex","justify-content-between"],[1,"paint-colar__bucket-img-wrapper"],[1,"paint-colar__bucket-img",3,"src"],["class","paint-colar__color-picker",3,"background","click",4,"ngFor","ngForOf"],[1,"mouse-color"],["mouseColorElem",""],[1,"paint-colar__ball",3,"click"],[1,"paint-colar__color-picker",3,"click"]],template:function(o,r){1&o&&l.Cc(0,p,10,7,"div",0),2&o&&l.kc("ngIf",r.PaintColarArray)},directives:[c.j,c.i],styles:['.paint-colar__wrapper[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.paint-colar__ball-wrapper[_ngcontent-%COMP%], .paint-colar__wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.paint-colar__ball-wrapper[_ngcontent-%COMP%]{justify-content:space-between;width:100%;margin-bottom:5vh;padding:0 1vw}.paint-colar__ball-wrapper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;margin:auto;z-index:-1;height:.5vh;background:#a64ac9}.paint-colar__ball[_ngcontent-%COMP%]{position:relative;width:2.5vw;height:2.5vw;border-radius:50%;background:#fef5cd;border:.2vw solid #be9a02;cursor:pointer}.paint-colar__ball--active[_ngcontent-%COMP%]{border:none!important}.paint-colar__ball--active[_ngcontent-%COMP%]:before{position:absolute;content:"";top:0;bottom:0;left:0;right:0;margin:auto;border-radius:50%;border:.2vw solid #000;opacity:.25}.paint-colar__color-picker-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#dad8d9;padding:.5vw 1.5vw;border-radius:10vh;margin:auto}.paint-colar__color-picker[_ngcontent-%COMP%]{width:2.5vw;height:2.5vw;border-radius:50%;cursor:pointer}.paint-colar__color-picker[_ngcontent-%COMP%]:not(:last-child){margin-right:1vw}.paint-colar__color-picker--active[_ngcontent-%COMP%]{border:.3vw solid #4d4d4d}.paint-colar__bucket-img[_ngcontent-%COMP%]{width:100%;height:100%}.paint-colar__bucket-img-wrapper[_ngcontent-%COMP%], .paint-colar__color-picker[_ngcontent-%COMP%]{width:2.5vw;height:2.5vw;margin-right:1vw}.mouse-color[_ngcontent-%COMP%]{padding:1vh;position:absolute}.mouse-color_border[_ngcontent-%COMP%]{border:.1vw solid #fff}']}),o})(),m=(()=>{class o{constructor(o){this.componentFactoryResolver=o}resolveComponent(){return this.componentFactoryResolver.resolveComponentFactory(C)}}return o.\u0275mod=l.Ob({type:o}),o.\u0275inj=l.Nb({factory:function(r){return new(r||o)(l.ac(l.j))},imports:[[c.b,e.n]]}),o})()}}]);