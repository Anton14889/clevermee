(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{SgJJ:function(t,e,r){"use strict";r.r(e),r.d(e,"PyramidChartComponent",(function(){return f})),r.d(e,"PyramidChartModule",(function(){return _}));var n=r("ofXK"),i=r("3Pt+"),a=r("fXoL"),o=r("XCOF");const c=["wrapper"],p=["canvas"];function s(t,e){if(1&t&&a.Rb(0,"span",13),2&t){const t=a.hc(2).$implicit;a.Gb("right_total",4===t.order),a.kc("innerHTML","="+t.totalValue,a.wc)}}function l(t,e){if(1&t&&a.Rb(0,"span",13),2&t){const t=a.hc(2).$implicit;a.Gb("right_total",4===t.order),a.kc("innerHTML",t.totalValue+"=",a.wc)}}function d(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",10),a.Wb(1,"input",11),a.ec("input",(function(e){a.vc(t);const r=a.hc().$implicit,n=a.hc(3);return[n.isIcon(e.target),n.getUserResult(e.target.value,r.order)]})),a.Vb(),a.Cc(2,s,1,3,"span",12),a.Cc(3,l,1,3,"span",12),a.Vb()}if(2&t){const t=a.hc().$implicit;a.Cb(1),a.Gb("input-disabled",t.defaultValue)("correct-exercise-answer",t.IsCorrect)("incorrect-exercise-answer",null!==t.IsCorrect&&!t.IsCorrect),a.kc("disabled",t.CorrectValue||t.defaultValue)("value",t.CorrectValue||t.defaultValue),a.Cb(1),a.kc("ngIf",t.totalValue&&7!==t.order),a.Cb(1),a.kc("ngIf",t.totalValue&&7===t.order)}}function h(t,e){if(1&t&&(a.Wb(0,"span",14),a.Dc(1),a.Vb()),2&t){const t=a.hc().$implicit;a.Cb(1),a.Fc(" ",t," ")}}function u(t,e){if(1&t&&(a.Ub(0),a.Cc(1,d,4,10,"div",8),a.Cc(2,h,2,1,"span",9),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.kc("ngIf",t.order),a.Cb(1),a.kc("ngIf",!t.order)}}function g(t,e){if(1&t&&(a.Wb(0,"div",6),a.Cc(1,u,3,2,"ng-container",7),a.Vb()),2&t){const t=e.$implicit;a.Cb(1),a.kc("ngForOf",t)}}function m(t,e){if(1&t&&(a.Wb(0,"div",1,2),a.Cc(2,g,2,1,"div",3),a.Rb(3,"canvas",4,5),a.Vb()),2&t){const t=a.hc();a.Cb(2),a.kc("ngForOf",t.pyramidChartArray)}}let f=(()=>{class t{constructor(t){this.exerciseDataService=t}ngOnChanges(){if(this.list.sort((t,e)=>t.Order-e.Order),this.isCorrectValues)return void this.list.forEach(t=>{this.pyramidChartArray.forEach(e=>{e.forEach(e=>{e.order===t.Order&&(e.CorrectValue=t.CorrectValue,e.IsCorrect=t.IsCorrect)})})});const t=[],e=[],r=[];this.list.forEach(n=>{const i={CorrectValue:null,IsCorrect:null,defaultValue:null,totalValue:null,symbolValue:null,order:n.Order};"SymbolValue"===n.Metric&&(i.symbolValue=n.Value,t.push(i)),"TotalValue"===n.Metric&&(i.totalValue=n.Value,r.push(i)),"DefaultValue"===n.Metric&&(i.defaultValue=n.Value,e.push(i))}),t[2].order=2,t[4].order=3,t[8].order=4,t[1].order=9,t[3].order=8,t[5].order=7,t[6].order=6,t[7].order=5,r[1].order=4,r[2].order=7;const n=[];t.forEach(t=>{n.push(t.symbolValue),e.forEach(e=>{e.order===t.order&&(t.defaultValue=e.defaultValue)}),r.forEach(e=>{e.order===t.order&&(t.totalValue=e.totalValue)})});const i=[[],[],[],[],[],[],[],[]];i[0].push(t[0]),i[2].push(t[1]),i[2].push(t[2]),i[4].push(t[3]),i[4].push(t[4]),i[6].push(t[5]),i[6].push(t[6]),i[6].push(t[7]),i[6].push(t[8]),i[1].push(n[0]),i[1].push(n[1]),i[3].push(n[2]),i[3].push(n[3]),i[5].push(n[4]),i[5].push(n[5]),i[7].push(n[6]),i[7].push(n[7]),i[7].push(n[8]),this.pyramidChartArray=i}getUserResult(t,e){this.exerciseDataService.subject.next({Type:"PyramidChart",Order:this.Order,Data:{Order:e,Value:t}})}isIcon(t){t.value?t.classList.remove("form_input-edit-icon"):t.classList.add("form_input-edit-icon")}ngAfterViewInit(){this.canvas.nativeElement.width=this.wrapper.nativeElement.getBoundingClientRect().width,this.canvas.nativeElement.height=this.wrapper.nativeElement.getBoundingClientRect().height;const t=this.canvas.nativeElement.getContext("2d");t.strokeStyle="#0daca7",t.lineWidth=this.windowWidth()/100/2;const e=this.wrapper.nativeElement.getElementsByClassName("pyramid-chart_input "),r=e[0],n=e[5],i=e[8],a=r.getBoundingClientRect().left-this.wrapper.nativeElement.getBoundingClientRect().left+r.getBoundingClientRect().width/2,o=r.getBoundingClientRect().height/2,c=n.getBoundingClientRect().left-this.wrapper.nativeElement.getBoundingClientRect().left+n.getBoundingClientRect().width/2,p=n.getBoundingClientRect().top-this.wrapper.nativeElement.getBoundingClientRect().top+n.getBoundingClientRect().height/2,s=i.getBoundingClientRect().left-this.wrapper.nativeElement.getBoundingClientRect().left+i.getBoundingClientRect().width/2;t.beginPath(),t.moveTo(a,o),t.lineTo(c,p),t.lineTo(s,p),t.lineTo(a,o),t.stroke()}windowWidth(){const t=window,e=document,r=e.documentElement,n=e.getElementsByTagName("body")[0];return t.innerWidth||r.clientWidth||n.clientWidth}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(o.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["app-pyramid-chart"]],viewQuery:function(t,e){var r;1&t&&(a.Hc(c,!0),a.Hc(p,!0)),2&t&&(a.rc(r=a.fc())&&(e.wrapper=r.first),a.rc(r=a.fc())&&(e.canvas=r.first))},inputs:{isCorrectValues:"isCorrectValues",Order:"Order",list:"list"},features:[a.Ab],decls:1,vars:1,consts:[["class","pyramid-chart-wrapper",4,"ngIf"],[1,"pyramid-chart-wrapper"],["wrapper",""],["class","pyramid-chart__row-wrapper d-flex align-items-center mx-auto ",4,"ngFor","ngForOf"],[1,"canvas"],["canvas",""],[1,"pyramid-chart__row-wrapper","d-flex","align-items-center","mx-auto"],[4,"ngFor","ngForOf"],["class","form_input-wrapper pyramid-chart_input-wrapper",4,"ngIf"],["class","pyramid-chart__symbol big-f-size",4,"ngIf"],[1,"form_input-wrapper","pyramid-chart_input-wrapper"],["type","text",1,"form_input","form_input-edit-icon","pyramid-chart_input","text-center","big-f-size",3,"disabled","value","input"],["class","pyramid-chart__total big-f-size",3,"right_total","innerHTML",4,"ngIf"],[1,"pyramid-chart__total","big-f-size",3,"innerHTML"],[1,"pyramid-chart__symbol","big-f-size"]],template:function(t,e){1&t&&a.Cc(0,m,5,1,"div",0),2&t&&a.kc("ngIf",e.pyramidChartArray)},directives:[n.j,n.i],styles:["[_nghost-%COMP%]{width:100%;padding:4vh 0}.pyramid-chart-wrapper[_ngcontent-%COMP%]{position:relative;width:95%;margin:0 auto;line-height:0}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-of-type(2){width:45%;padding:1vh 0 3vh}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-child(3){width:50%}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-of-type(4){width:93%;padding:1vh 0 3vh}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-child(6){padding:1vh 0 3vh}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-child(6)   .pyramid-chart__symbol[_ngcontent-%COMP%]:first-child{margin-left:13.5%}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-child(6)   .pyramid-chart__symbol[_ngcontent-%COMP%]:last-child{margin-left:auto;margin-right:13.5%}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-child(8){width:75%;z-index:-1}.pyramid-chart_input-wrapper[_ngcontent-%COMP%]{width:10vw;margin:auto}.pyramid-chart__symbol[_ngcontent-%COMP%]{display:block;margin:auto}.pyramid-chart__total[_ngcontent-%COMP%]{position:absolute;line-height:0}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:first-of-type   .pyramid-chart_input-wrapper[_ngcontent-%COMP%]   .pyramid-chart__total[_ngcontent-%COMP%]{top:-50%;right:-50%}.pyramid-chart__row-wrapper[_ngcontent-%COMP%]:nth-of-type(7)   .pyramid-chart_input-wrapper[_ngcontent-%COMP%]   .pyramid-chart__total[_ngcontent-%COMP%]{bottom:-50%;left:-50%}.right_total[_ngcontent-%COMP%]{right:-50%;left:inherit!important}.canvas[_ngcontent-%COMP%]{position:absolute;left:0;top:0;z-index:-1}"]}),t})(),_=(()=>{class t{constructor(t){this.componentFactoryResolver=t}resolveComponent(){return this.componentFactoryResolver.resolveComponentFactory(f)}}return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)(a.ac(a.j))},imports:[[n.b,i.n]]}),t})()}}]);