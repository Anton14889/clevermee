(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"z2j+":function(t,e,n){"use strict";n.r(e),n.d(e,"FindTheNumbersComponent",(function(){return d})),n.d(e,"FindTheNumbersModule",(function(){return g}));var i=n("ofXK"),s=n("3Pt+"),o=n("fXoL"),r=n("XCOF");const a=["canvas"],h=["wrapper"];function c(t,e){if(1&t&&(o.Wb(0,"td",10),o.Dc(1),o.Vb()),2&t){const t=e.$implicit;o.kc("id","order_"+t.order),o.Db("data-order",t.order),o.Cb(1),o.Ec(t.value)}}function l(t,e){if(1&t&&(o.Wb(0,"tr",8),o.Cc(1,c,2,3,"td",9),o.Vb()),2&t){const t=e.$implicit;o.Cb(1),o.kc("ngForOf",t)}}function u(t,e){if(1&t){const t=o.Xb();o.Wb(0,"div",1),o.ec("resize",(function(){return o.vc(t),o.hc().onResize()}),!1,o.uc),o.Wb(1,"div",2,3),o.Wb(3,"table",4),o.ec("mousemove",(function(e){return o.vc(t),o.hc().mousemove(e)}))("mousedown",(function(e){return o.vc(t),o.hc().mousedown(e)}))("mouseup",(function(e){return o.vc(t),o.hc().mouseup(e)}))("touchmove",(function(e){return o.vc(t),o.hc().mousemove(e)}))("touchstart",(function(e){return o.vc(t),o.hc().mousedown(e)}))("touchend",(function(e){return o.vc(t),o.hc().mouseup(e)})),o.Cc(4,l,2,1,"tr",5),o.Vb(),o.Rb(5,"canvas",6,7),o.Vb(),o.Vb()}if(2&t){const t=o.hc();o.Cb(4),o.kc("ngForOf",t.findNumbersArray)}}let d=(()=>{class t{constructor(t){this.exerciseDataService=t,this.elementsStorage=[],this.elementsCorrect=[],this.count=0,this.saveTouchPosition={x:null,y:null}}ngOnChanges(){if(this.list.sort((t,e)=>t.Order-e.Order),this.isCorrectValues)return void this.setCorrect();const t=[];let e=0,n=0;this.list.forEach(i=>{"LineValues"===i.Metric&&(t.push([]),i.Value.split("").forEach(i=>{const s={order:++n,value:i};t[e].push(s)}),e++)}),this.findNumbersArray=t}onResize(){this.ngAfterViewInit(),this.clearCanvas(),this.paintSaveLines()}mousedown(t){this.isCorrectValues||(this.mouseStart=!0,this.elementsStorage[this.count]||this.elementsStorage.push({start:null,end:null}),this.elementsStorage[this.count].start=document.elementFromPoint(this.getEventPosition(t).clientX,this.getEventPosition(t).clientY))}mouseup(t){this.mouseStart&&null!=this.inRow?(this.mouseStart=!1,this.elementsStorage[this.count].end=document.elementFromPoint(this.getEventPosition(t).clientX,this.getEventPosition(t).clientY),this.getUserValues(this.count),this.clearCanvas(),this.paintSaveLines(),this.count++):void 0!==this.inRow&&null!=this.inRow||(this.elementsStorage[this.count].start=null)}getUserValues(t){const e=+this.elementsStorage[t].start.getAttribute("data-order")>+this.elementsStorage[t].end.getAttribute("data-order"),n=this.getCenterPosition(this.elementsStorage[t].start).y===this.getCenterPosition(this.elementsStorage[t].end).y,i=n?this.elementsStorage[t].start.getBoundingClientRect().width:this.elementsStorage[t].start.getBoundingClientRect().height,s=e?n?this.getCenterPosition(this.elementsStorage[t].end).x:this.getCenterPosition(this.elementsStorage[t].end).y:n?this.getCenterPosition(this.elementsStorage[t].start).x:this.getCenterPosition(this.elementsStorage[t].start).y,o=e?n?this.getCenterPosition(this.elementsStorage[t].start).x+i/2:this.getCenterPosition(this.elementsStorage[t].start).y+i/2:n?this.getCenterPosition(this.elementsStorage[t].end).x+i/2:this.getCenterPosition(this.elementsStorage[t].end).y+i/2,r=n?this.getCenterPosition(this.elementsStorage[t].start).y:this.getCenterPosition(this.elementsStorage[t].start).x;let a="";for(let c=s;c<o;c+=i){let t;t=n?document.elementFromPoint(c,r):document.elementFromPoint(r,c),a+=t.innerText}e&&(a=a.split("").reverse().join(""));let h=!1;for(let c=0;c<t;c++){const e=this.getCenterPosition(this.elementsStorage[t].start),n=this.getCenterPosition(this.elementsStorage[t].end),i=this.getCenterPosition(this.elementsStorage[c].start),s=this.getCenterPosition(this.elementsStorage[c].end),o=(i.x<=e.x&&i.x>=n.x||i.x>=e.x&&i.x<=n.x)&&(s.x<=e.x&&s.x>=n.x||s.x>=e.x&&s.x<=n.x)&&(i.y<=e.y&&i.y>=n.y||i.y>=e.y&&i.y<=n.y)&&(s.y<=e.y&&s.y>=n.y||s.y>=e.y&&s.y<=n.y);((e.x<=i.x&&e.x>=s.x||e.x>=i.x&&e.x<=s.x)&&(n.x<=i.x&&n.x>=s.x||n.x>=i.x&&n.x<=s.x)&&(e.y<=i.y&&e.y>=s.y||e.y>=i.y&&e.y<=s.y)&&(n.y<=i.y&&n.y>=s.y||n.y>=i.y&&n.y<=s.y)||o)&&(h=!0,this.getUserResult(a,+this.elementsStorage[t].start.getAttribute("data-order")),this.getUserResult(null,+this.elementsStorage[c].start.getAttribute("data-order")),this.elementsStorage.splice(c,1),this.count--)}h||this.getUserResult(a,+this.elementsStorage[t].start.getAttribute("data-order"))}mousemove(t){if(!this.mouseStart||null===this.elementsStorage[this.count].start)return;const e=document.elementFromPoint(this.getEventPosition(t).clientX,this.getEventPosition(t).clientY),n=this.wrapper.nativeElement.getBoundingClientRect().left,i=this.wrapper.nativeElement.getBoundingClientRect().top,s=this.getCenterPosition(e).x-n,o=this.getCenterPosition(e).y-i,r=this.getCenterPosition(this.elementsStorage[this.count].start).x-n,a=this.getCenterPosition(this.elementsStorage[this.count].start).y-i,h=this.canvas.nativeElement.getContext("2d");this.getCenterPosition(e).y===this.getCenterPosition(this.elementsStorage[this.count].start).y?this.inRow=!0:this.getCenterPosition(e).x===this.getCenterPosition(this.elementsStorage[this.count].start).x?this.inRow=!1:(this.inRow=null,this.clearCanvas(),this.paintSaveLines()),this.inRow&&(this.clearCanvas(),h.beginPath(),h.moveTo(r,a),h.lineTo(s,o),h.stroke(),this.paintSaveLines()),!1===this.inRow&&(this.clearCanvas(),h.beginPath(),h.moveTo(r,a),h.lineTo(s,o),h.stroke(),this.paintSaveLines())}getEventPosition(t){let e,n;return"mousemove"!==t.type&&"mousedown"!==t.type&&"mouseup"!==t.type||(e=t.clientX,n=t.clientY),"touchmove"!==t.type&&"touchstart"!==t.type||(e=t.touches[0].clientX,n=t.touches[0].clientY,this.saveTouchPosition.x=t.touches[0].clientX,this.saveTouchPosition.y=t.touches[0].clientY),"touchend"===t.type?{clientX:this.saveTouchPosition.x,clientY:this.saveTouchPosition.y}:{clientX:e,clientY:n}}clearCanvas(){this.canvas.nativeElement.getContext("2d").clearRect(0,0,this.wrapper.nativeElement.getBoundingClientRect().width,this.wrapper.nativeElement.getBoundingClientRect().height)}paintSaveLines(){const t=["#632a23","#f4cccc","#366360","#acddda","#716630","#f5e7aa","#664467","#dbbfe7"],e=["#4b701d","#a4e065"],n=["#ae2f2f","#f6bebe"];let i=0;const s=this.canvas.nativeElement.getContext("2d"),o=(t,e,n,i,o,r)=>{s.beginPath(),s.moveTo(t,e),s.lineTo(n,i),s.lineWidth=o,s.strokeStyle=r,s.lineCap="round",s.stroke()};if(!this.isCorrectValues)for(const r of this.elementsStorage)if(r&&r.start&&r.end){const e=this.getCenterPosition(r.start).x-this.canvas.nativeElement.getBoundingClientRect().left,n=this.getCenterPosition(r.start).y-this.canvas.nativeElement.getBoundingClientRect().top,s=this.getCenterPosition(r.end).x-this.canvas.nativeElement.getBoundingClientRect().left,a=this.getCenterPosition(r.end).y-this.canvas.nativeElement.getBoundingClientRect().top;let h=this.windowWidth()/100*2.4;o(e,n,s,a,h,t[i++]),h=this.windowWidth()/100*2,o(e,n,s,a,h,t[i++]),i>7&&(i=0)}if(this.isCorrectValues)for(const r of this.elementsCorrect)if(r&&r.start&&r.end){const t=this.getCenterPosition(r.start).x-this.canvas.nativeElement.getBoundingClientRect().left,s=this.getCenterPosition(r.start).y-this.canvas.nativeElement.getBoundingClientRect().top,a=this.getCenterPosition(r.end).x-this.canvas.nativeElement.getBoundingClientRect().left,h=this.getCenterPosition(r.end).y-this.canvas.nativeElement.getBoundingClientRect().top;if(r.isCorrect){let n=this.windowWidth()/100*2.4;o(t,s,a,h,n,e[i]),i++,n=this.windowWidth()/100*2,o(t,s,a,h,n,e[i])}else{let e=this.windowWidth()/100*2.4;o(t,s,a,h,e,n[i]),i++,e=this.windowWidth()/100*2,o(t,s,a,h,e,n[i])}i=0}}getUserResult(t,e){this.exerciseDataService.subject.next({Type:"FindTheNumbers",Order:this.Order,Data:{Order:e,Value:t}})}getCenterPosition(t){const e=t.getBoundingClientRect().width/2,n=t.getBoundingClientRect().height/2,i=t.getBoundingClientRect().top;return{x:t.getBoundingClientRect().left+e,y:i+n}}ngAfterViewInit(){this.canvas.nativeElement.width=this.wrapper.nativeElement.getBoundingClientRect().width,this.canvas.nativeElement.height=this.wrapper.nativeElement.getBoundingClientRect().height;const t=this.canvas.nativeElement.getContext("2d");t.globalAlpha=.5,t.strokeStyle="#664467",t.lineWidth=this.windowWidth()/100*2,t.lineCap="round"}setCorrect(){if(this.isCorrectValues){this.elementsStorage=[],this.count=0;for(const t of this.list){const e=document.getElementById("order_"+t.Order);this.elementsCorrect.push({start:e,end:null,isCorrect:t.IsCorrect});const n=t.Order>this.findNumbersArray[0].length?t.Order%this.findNumbersArray[0].length:t.Order,i=Math.floor(t.Order/this.findNumbersArray[0].length);let s=0;for(let o=n;o<=this.findNumbersArray[0].length;o++){const e=document.getElementById("order_"+(i*this.findNumbersArray[0].length+o));if(t.CorrectValue[s]!==e.innerText){s=0;break}if(t.CorrectValue.length-1===s){this.elementsCorrect[this.count].end=e;break}s++}if(this.elementsCorrect[this.count].end)this.count++;else{for(let e=n;e>=0;e--){const n=document.getElementById("order_"+(i*this.findNumbersArray[0].length+e));if(t.CorrectValue[s]!==n.innerText){s=0;break}if(t.CorrectValue.length-1===s){this.elementsCorrect[this.count].end=n;break}s++}if(this.elementsCorrect[this.count].end)this.count++;else{for(let e=i;e<=this.findNumbersArray.length;e++){const i=document.getElementById("order_"+(e*this.findNumbersArray[0].length+n));if(t.CorrectValue[s]!==i.innerText){s=0;break}if(t.CorrectValue.length-1===s){this.elementsCorrect[this.count].end=i;break}s++}if(this.elementsCorrect[this.count].end)this.count++;else{for(let e=i;e>=0;e--){const i=document.getElementById("order_"+(e*this.findNumbersArray[0].length+n));if(t.CorrectValue[s]!==i.innerText){s=0;break}if(t.CorrectValue.length-1===s){this.elementsCorrect[this.count].end=i,this.count++;break}s++}this.count++}}}}}this.onResize()}windowWidth(){const t=window,e=document,n=e.documentElement,i=e.getElementsByTagName("body")[0];return t.innerWidth||n.clientWidth||i.clientWidth}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(r.a))},t.\u0275cmp=o.Kb({type:t,selectors:[["app-find-the-numbers"]],viewQuery:function(t,e){var n;1&t&&(o.Hc(a,!0),o.Hc(h,!0)),2&t&&(o.rc(n=o.fc())&&(e.canvas=n.first),o.rc(n=o.fc())&&(e.wrapper=n.first))},inputs:{isCorrectValues:"isCorrectValues",Order:"Order",list:"list"},features:[o.Ab],decls:1,vars:1,consts:[["class","d-flex flex-column w-100 h-100",3,"resize",4,"ngIf"],[1,"d-flex","flex-column","w-100","h-100",3,"resize"],[1,"find-the-numbers__table-wrapper","m-auto"],["wrapper",""],[1,"find-the-numbers__table",3,"mousemove","mousedown","mouseup","touchmove","touchstart","touchend"],["class","find-the-numbers__tr",4,"ngFor","ngForOf"],[1,"canvas"],["canvas",""],[1,"find-the-numbers__tr"],["class","find-the-numbers__td main-f-size",3,"id",4,"ngFor","ngForOf"],[1,"find-the-numbers__td","main-f-size",3,"id"]],template:function(t,e){1&t&&o.Cc(0,u,7,1,"div",0),2&t&&o.kc("ngIf",e.findNumbersArray)},directives:[i.j,i.i],styles:["[_nghost-%COMP%]{width:100%;margin:auto}.find-the-numbers__table-wrapper[_ngcontent-%COMP%]{position:relative;max-width:100%;display:flex;flex-wrap:wrap;padding:0 1vh}.find-the-numbers__correct-value[_ngcontent-%COMP%]{padding:0 .5vh;border-radius:5vh}.find-the-numbers__correct-value[_ngcontent-%COMP%]:not(:last-child){margin-right:1vh}.canvas[_ngcontent-%COMP%]{position:absolute;z-index:-1;top:0;left:0;background:#f1f2f4;border-radius:2vh}.find-the-numbers__td[_ngcontent-%COMP%]{padding:1vh 1vw;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"]}),t})(),g=(()=>{class t{constructor(t){this.componentFactoryResolver=t}resolveComponent(){return this.componentFactoryResolver.resolveComponentFactory(d)}}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)(o.ac(o.j))},imports:[[i.b,s.n]]}),t})()}}]);