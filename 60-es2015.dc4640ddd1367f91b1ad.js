(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{MycW:function(o,t,c){"use strict";c.r(t),c.d(t,"PaintTheChocoComponent",(function(){return f})),c.d(t,"PaintTheChocoModule",(function(){return m}));var e=c("ofXK"),r=c("3Pt+"),i=c("fXoL"),n=c("XCOF"),l=c("TznM");const a=["mouseColorElem"],s=["paintChoco"];function h(o,t){if(1&o){const o=i.Xb();i.Wb(0,"td",15),i.ec("click",(function(c){i.vc(o);const e=t.index,r=i.hc().index,n=i.hc().index;return[i.hc(2).addPaintChocoColor(c.target,n,r,e)]})),i.Vb()}if(2&o){const o=t.$implicit;i.Bc("background",o.activeColor.color,i.Jb),i.Gb("paint-choco__ball--active",o.activeColor.color)}}function u(o,t){if(1&o&&(i.Wb(0,"tr",13),i.Cc(1,h,1,4,"td",14),i.Vb()),2&o){const o=t.$implicit;i.Cb(1),i.kc("ngForOf",o)}}function d(o,t){if(1&o&&(i.Wb(0,"table",11),i.Cc(1,u,2,1,"tr",12),i.Vb()),2&o){const o=t.$implicit;i.Cb(1),i.kc("ngForOf",o)}}function C(o,t){if(1&o){const o=i.Xb();i.Wb(0,"div",16),i.ec("click",(function(c){i.vc(o);const e=t.index;return i.hc(2).addActiveClass(c.target,e)})),i.Vb()}2&o&&i.Bc("background",t.$implicit.activeColor.color,i.Jb)}function p(o,t){if(1&o){const o=i.Xb();i.Wb(0,"div",1,2),i.ec("mousemove",(function(t){return i.vc(o),i.hc().mouseColor(t)}))("touchmove",(function(t){return i.vc(o),i.hc().mouseColor(t)})),i.Wb(2,"div",3),i.Cc(3,d,2,1,"table",4),i.Vb(),i.Wb(4,"div",5),i.Wb(5,"div",6),i.Rb(6,"img",7),i.Vb(),i.Cc(7,C,1,2,"div",8),i.Vb(),i.Rb(8,"div",9,10),i.Vb()}if(2&o){const o=i.hc();i.Cb(3),i.kc("ngForOf",o.PaintChocoArray),i.Cb(3),i.kc("src",o.imgSrc,i.xc),i.Cb(1),i.kc("ngForOf",o.resultColors),i.Cb(1),i.Bc("background",o.chocoColor,i.Jb),i.Gb("mouse-color_border",o.chocoColor)}}let f=(()=>{class o{constructor(o,t){this.exerciseDataService=o,this.resourceLoadsService=t,this.colors=[{color:"#10afaa",bucketImg:"BucketBlue",colorName:"Blue",order:null},{color:"#ff712d",bucketImg:"BucketOrange",colorName:"Orange",order:null},{color:"#a64ac9",bucketImg:"BucketPurple",colorName:"Purple",order:null},{color:"#fccd05",bucketImg:"BucketYellow",colorName:"Yellow",order:null}],this.imgSrc=t.getExerciseImage(this.colors[0].bucketImg)}ngOnChanges(){if(!this.list)return;if(this.list.sort((o,t)=>o.Order-t.Order),this.isCorrectValues){this.PaintChocoArray.forEach(o=>{o.forEach(o=>{o.forEach(o=>{o.activeColor.color=null,o.activeColor.colorName=null})})});let o=1;return void this.list.forEach((t,c)=>{this.resultColors.forEach(c=>{if(c.order===t.Order){let e=+t.CorrectValue,r=0;for(;e>0;)this.PaintChocoArray.forEach(e=>{e.forEach(e=>{e.forEach(e=>{e.order===o&&r<+t.CorrectValue&&(e.CorrectValue=t.CorrectValue,e.IsCorrect=t.IsCorrect,e.activeColor.color=c.activeColor.color,e.activeColor.colorName=c.activeColor.colorName,o++,r++)})})}),e--}})})}const o=[];let t;this.list.forEach(c=>{"NumberOfChocos"===c.Metric&&(t=c.Value),"Color"===c.Metric&&o.push({CorrectValue:null,IsCorrect:null,defaultValue:c.Value?c.Value:null,order:c.Order,activeColor:{color:"",colorName:""},activeOrder:null})});let c=t,e=0;const r=[];let i=0;for(;c>0;){r.push([]);let o=3;for(;o>=0;)o%2==0&&r[e].push([{CorrectValue:null,IsCorrect:null,defaultValue:null,order:++i,activeColor:{color:"",colorName:""},activeOrder:null},{CorrectValue:null,IsCorrect:null,defaultValue:null,order:++i,activeColor:{color:"",colorName:""},activeOrder:null}]),o--;e++,c--}const n=[];o.forEach(o=>{this.colors.forEach(t=>{o.defaultValue===t.colorName&&(t.order=o.order,o.activeColor.color=t.color,o.activeColor.colorName=t.colorName,n.push(o))})}),this.resultColors=n,this.PaintChocoArray=r}addActiveClass(o,t){if(this.isCorrectValues)return;const c=document.getElementsByClassName("paint-choco__color-picker");Array.from(c).forEach(o=>{o.classList.remove("paint-choco__color-picker--active")}),o.classList.add("paint-choco__color-picker--active"),this.imgSrc=this.resourceLoadsService.getExerciseImage(this.colors[t].bucketImg),this.chocoColor=this.colors[t].color,this.colorOrder=t+1,("ontouchstart"in window||navigator.msMaxTouchPoints)&&(this.mouseColorElem.nativeElement.style.display="none")}addPaintChocoColor(o,t,c,e){this.isCorrectValues||this.chocoColor&&(this.resultColors.forEach(o=>{o.activeColor.color===this.chocoColor&&(this.PaintChocoArray[t][c][e].activeColor.color=o.activeColor.color,this.PaintChocoArray[t][c][e].activeColor.colorName=o.activeColor.colorName,this.PaintChocoArray[t][c][e].activeOrder=o.order)}),this.getUserResult())}mouseColor(o){if(this.isCorrectValues)return;if(o.clientX>this.paintChoco.nativeElement.getBoundingClientRect().right)return;const t=o.clientX-this.paintChoco.nativeElement.getBoundingClientRect().left,c=o.clientY-this.paintChoco.nativeElement.getBoundingClientRect().top,e=this.mouseColorElem.nativeElement.getBoundingClientRect().width;this.mouseColorElem.nativeElement.style.left=t+e+"px",this.mouseColorElem.nativeElement.style.top=c+"px"}getUserResult(){const o={Type:"PaintTheChoco",Order:this.Order,Data:{Order:null,Value:null}},t={};this.PaintChocoArray.forEach(o=>{o.forEach(o=>{o.forEach(o=>{o.activeColor.color&&(t[o.activeOrder]=0)})})}),this.PaintChocoArray.forEach(o=>{o.forEach(o=>{o.forEach(o=>{o.activeColor.color&&t[o.activeOrder]++})})});for(const c in t)Object.prototype.hasOwnProperty.call(t,c)&&(o.Data.Order=c,o.Data.Value=t[c],this.exerciseDataService.subject.next(o))}}return o.\u0275fac=function(t){return new(t||o)(i.Qb(n.a),i.Qb(l.a))},o.\u0275cmp=i.Kb({type:o,selectors:[["app-paint-the-choco"]],viewQuery:function(o,t){var c;1&o&&(i.Hc(a,!0),i.Hc(s,!0)),2&o&&(i.rc(c=i.fc())&&(t.mouseColorElem=c.first),i.rc(c=i.fc())&&(t.paintChoco=c.first))},inputs:{isCorrectValues:"isCorrectValues",Order:"Order",list:"list"},features:[i.Ab],decls:1,vars:1,consts:[["class","paint-choco__wrapper",3,"mousemove","touchmove",4,"ngIf"],[1,"paint-choco__wrapper",3,"mousemove","touchmove"],["paintChoco",""],[1,"paint-choco__table-wrapper","d-flex","align-items-center","justify-content-center"],["class","paint-choco__table d-flex flex-column",4,"ngFor","ngForOf"],[1,"paint-choco__color-picker-wrapper","d-flex","justify-content-between"],[1,"paint-choco__bucket-img-wrapper"],[1,"paint-choco__bucket-img",3,"src"],["class","paint-choco__color-picker",3,"background","click",4,"ngFor","ngForOf"],[1,"mouse-color"],["mouseColorElem",""],[1,"paint-choco__table","d-flex","flex-column"],["class","paint-choco__tr",4,"ngFor","ngForOf"],[1,"paint-choco__tr"],["class","paint-choco__td text-center big-f-size",3,"background","paint-choco__ball--active","click",4,"ngFor","ngForOf"],[1,"paint-choco__td","text-center","big-f-size",3,"click"],[1,"paint-choco__color-picker",3,"click"]],template:function(o,t){1&o&&i.Cc(0,p,10,7,"div",0),2&o&&i.kc("ngIf",t.PaintChocoArray)},directives:[e.j,e.i],styles:["[_nghost-%COMP%]{width:100%;margin:auto}.paint-choco__wrapper[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}.paint-choco__table-wrapper[_ngcontent-%COMP%]{margin:5vh 0}.paint-choco__table[_ngcontent-%COMP%]:not(:last-child){margin-right:2vw}.paint-choco__tr[_ngcontent-%COMP%]:last-child   .paint-choco__td[_ngcontent-%COMP%]{border-top:none}.paint-choco__td[_ngcontent-%COMP%]{border:.5vh solid #bc8425;width:4vw;height:4vw;background:#e3b86e;cursor:pointer;transition:background .2s}.paint-choco__color-picker-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#dad8d9;padding:.5vw 1.5vw;border-radius:10vh;margin:auto}.paint-choco__color-picker[_ngcontent-%COMP%]{width:2.5vw;height:2.5vw;border-radius:50%;cursor:pointer}.paint-choco__color-picker[_ngcontent-%COMP%]:not(:last-child){margin-right:1vw}.paint-choco__color-picker--active[_ngcontent-%COMP%]{border:.3vw solid #4d4d4d}.paint-choco__bucket-img[_ngcontent-%COMP%]{width:100%;height:100%}.paint-choco__bucket-img-wrapper[_ngcontent-%COMP%]{width:2.5vw;height:2.5vw;margin-right:1vw}.mouse-color[_ngcontent-%COMP%]{padding:1vh;position:absolute}.mouse-color_border[_ngcontent-%COMP%]{border:.1vw solid #fff}"]}),o})(),m=(()=>{class o{constructor(o){this.componentFactoryResolver=o}resolveComponent(){return this.componentFactoryResolver.resolveComponentFactory(f)}}return o.\u0275mod=i.Ob({type:o}),o.\u0275inj=i.Nb({factory:function(t){return new(t||o)(i.ac(i.j))},imports:[[e.b,r.n]]}),o})()}}]);