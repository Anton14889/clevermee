function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"z2j+":function(e,t,n){"use strict";n.r(t),n.d(t,"FindTheNumbersComponent",(function(){return d})),n.d(t,"FindTheNumbersModule",(function(){return g}));var i=n("ofXK"),r=n("3Pt+"),s=n("fXoL"),o=n("XCOF"),a=["canvas"],l=["wrapper"];function c(e,t){if(1&e&&(s.Wb(0,"td",10),s.Dc(1),s.Vb()),2&e){var n=t.$implicit;s.kc("id","order_"+n.order),s.Db("data-order",n.order),s.Cb(1),s.Ec(n.value)}}function u(e,t){if(1&e&&(s.Wb(0,"tr",8),s.Cc(1,c,2,3,"td",9),s.Vb()),2&e){var n=t.$implicit;s.Cb(1),s.kc("ngForOf",n)}}function h(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",1),s.ec("resize",(function(){return s.vc(n),s.hc().onResize()}),!1,s.uc),s.Wb(1,"div",2,3),s.Wb(3,"table",4),s.ec("mousemove",(function(e){return s.vc(n),s.hc().mousemove(e)}))("mousedown",(function(e){return s.vc(n),s.hc().mousedown(e)}))("mouseup",(function(e){return s.vc(n),s.hc().mouseup(e)}))("touchmove",(function(e){return s.vc(n),s.hc().mousemove(e)}))("touchstart",(function(e){return s.vc(n),s.hc().mousedown(e)}))("touchend",(function(e){return s.vc(n),s.hc().mouseup(e)})),s.Cc(4,u,2,1,"tr",5),s.Vb(),s.Rb(5,"canvas",6,7),s.Vb(),s.Vb()}if(2&e){var i=s.hc();s.Cb(4),s.kc("ngForOf",i.findNumbersArray)}}var d=function(){var e=function(){function e(t){_classCallCheck(this,e),this.exerciseDataService=t,this.elementsStorage=[],this.elementsCorrect=[],this.count=0,this.saveTouchPosition={x:null,y:null}}return _createClass(e,[{key:"ngOnChanges",value:function(){if(this.list.sort((function(e,t){return e.Order-t.Order})),this.isCorrectValues)this.setCorrect();else{var e=[],t=0,n=0;this.list.forEach((function(i){"LineValues"===i.Metric&&(e.push([]),i.Value.split("").forEach((function(i){var r={order:++n,value:i};e[t].push(r)})),t++)})),this.findNumbersArray=e}}},{key:"onResize",value:function(){this.ngAfterViewInit(),this.clearCanvas(),this.paintSaveLines()}},{key:"mousedown",value:function(e){this.isCorrectValues||(this.mouseStart=!0,this.elementsStorage[this.count]||this.elementsStorage.push({start:null,end:null}),this.elementsStorage[this.count].start=document.elementFromPoint(this.getEventPosition(e).clientX,this.getEventPosition(e).clientY))}},{key:"mouseup",value:function(e){this.mouseStart&&null!=this.inRow?(this.mouseStart=!1,this.elementsStorage[this.count].end=document.elementFromPoint(this.getEventPosition(e).clientX,this.getEventPosition(e).clientY),this.getUserValues(this.count),this.clearCanvas(),this.paintSaveLines(),this.count++):void 0!==this.inRow&&null!=this.inRow||(this.elementsStorage[this.count].start=null)}},{key:"getUserValues",value:function(e){for(var t=+this.elementsStorage[e].start.getAttribute("data-order")>+this.elementsStorage[e].end.getAttribute("data-order"),n=this.getCenterPosition(this.elementsStorage[e].start).y===this.getCenterPosition(this.elementsStorage[e].end).y,i=n?this.elementsStorage[e].start.getBoundingClientRect().width:this.elementsStorage[e].start.getBoundingClientRect().height,r=t?n?this.getCenterPosition(this.elementsStorage[e].end).x:this.getCenterPosition(this.elementsStorage[e].end).y:n?this.getCenterPosition(this.elementsStorage[e].start).x:this.getCenterPosition(this.elementsStorage[e].start).y,s=t?n?this.getCenterPosition(this.elementsStorage[e].start).x+i/2:this.getCenterPosition(this.elementsStorage[e].start).y+i/2:n?this.getCenterPosition(this.elementsStorage[e].end).x+i/2:this.getCenterPosition(this.elementsStorage[e].end).y+i/2,o=n?this.getCenterPosition(this.elementsStorage[e].start).y:this.getCenterPosition(this.elementsStorage[e].start).x,a="",l=r;l<s;l+=i){a+=(n?document.elementFromPoint(l,o):document.elementFromPoint(o,l)).innerText}t&&(a=a.split("").reverse().join(""));for(var c=!1,u=0;u<e;u++){var h=this.getCenterPosition(this.elementsStorage[e].start),d=this.getCenterPosition(this.elementsStorage[e].end),g=this.getCenterPosition(this.elementsStorage[u].start),m=this.getCenterPosition(this.elementsStorage[u].end),f=(g.x<=h.x&&g.x>=d.x||g.x>=h.x&&g.x<=d.x)&&(m.x<=h.x&&m.x>=d.x||m.x>=h.x&&m.x<=d.x)&&(g.y<=h.y&&g.y>=d.y||g.y>=h.y&&g.y<=d.y)&&(m.y<=h.y&&m.y>=d.y||m.y>=h.y&&m.y<=d.y);((h.x<=g.x&&h.x>=m.x||h.x>=g.x&&h.x<=m.x)&&(d.x<=g.x&&d.x>=m.x||d.x>=g.x&&d.x<=m.x)&&(h.y<=g.y&&h.y>=m.y||h.y>=g.y&&h.y<=m.y)&&(d.y<=g.y&&d.y>=m.y||d.y>=g.y&&d.y<=m.y)||f)&&(c=!0,this.getUserResult(a,+this.elementsStorage[e].start.getAttribute("data-order")),this.getUserResult(null,+this.elementsStorage[u].start.getAttribute("data-order")),this.elementsStorage.splice(u,1),this.count--)}c||this.getUserResult(a,+this.elementsStorage[e].start.getAttribute("data-order"))}},{key:"mousemove",value:function(e){if(this.mouseStart&&null!==this.elementsStorage[this.count].start){var t=document.elementFromPoint(this.getEventPosition(e).clientX,this.getEventPosition(e).clientY),n=this.wrapper.nativeElement.getBoundingClientRect().left,i=this.wrapper.nativeElement.getBoundingClientRect().top,r=this.getCenterPosition(t).x-n,s=this.getCenterPosition(t).y-i,o=this.getCenterPosition(this.elementsStorage[this.count].start).x-n,a=this.getCenterPosition(this.elementsStorage[this.count].start).y-i,l=this.canvas.nativeElement.getContext("2d");this.getCenterPosition(t).y===this.getCenterPosition(this.elementsStorage[this.count].start).y?this.inRow=!0:this.getCenterPosition(t).x===this.getCenterPosition(this.elementsStorage[this.count].start).x?this.inRow=!1:(this.inRow=null,this.clearCanvas(),this.paintSaveLines()),this.inRow&&(this.clearCanvas(),l.beginPath(),l.moveTo(o,a),l.lineTo(r,s),l.stroke(),this.paintSaveLines()),!1===this.inRow&&(this.clearCanvas(),l.beginPath(),l.moveTo(o,a),l.lineTo(r,s),l.stroke(),this.paintSaveLines())}}},{key:"getEventPosition",value:function(e){var t,n;return"mousemove"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type||(t=e.clientX,n=e.clientY),"touchmove"!==e.type&&"touchstart"!==e.type||(t=e.touches[0].clientX,n=e.touches[0].clientY,this.saveTouchPosition.x=e.touches[0].clientX,this.saveTouchPosition.y=e.touches[0].clientY),"touchend"===e.type?{clientX:this.saveTouchPosition.x,clientY:this.saveTouchPosition.y}:{clientX:t,clientY:n}}},{key:"clearCanvas",value:function(){this.canvas.nativeElement.getContext("2d").clearRect(0,0,this.wrapper.nativeElement.getBoundingClientRect().width,this.wrapper.nativeElement.getBoundingClientRect().height)}},{key:"paintSaveLines",value:function(){var e=["#632a23","#f4cccc","#366360","#acddda","#716630","#f5e7aa","#664467","#dbbfe7"],t=["#4b701d","#a4e065"],n=["#ae2f2f","#f6bebe"],i=0,r=this.canvas.nativeElement.getContext("2d"),s=function(e,t,n,i,s,o){r.beginPath(),r.moveTo(e,t),r.lineTo(n,i),r.lineWidth=s,r.strokeStyle=o,r.lineCap="round",r.stroke()};if(!this.isCorrectValues){var o,a=_createForOfIteratorHelper(this.elementsStorage);try{for(a.s();!(o=a.n()).done;){var l=o.value;if(l&&l.start&&l.end){var c=this.getCenterPosition(l.start).x-this.canvas.nativeElement.getBoundingClientRect().left,u=this.getCenterPosition(l.start).y-this.canvas.nativeElement.getBoundingClientRect().top,h=this.getCenterPosition(l.end).x-this.canvas.nativeElement.getBoundingClientRect().left,d=this.getCenterPosition(l.end).y-this.canvas.nativeElement.getBoundingClientRect().top,g=this.windowWidth()/100*2.4;s(c,u,h,d,g,e[i++]),s(c,u,h,d,g=this.windowWidth()/100*2,e[i++]),i>7&&(i=0)}}}catch(P){a.e(P)}finally{a.f()}}if(this.isCorrectValues){var m,f=_createForOfIteratorHelper(this.elementsCorrect);try{for(f.s();!(m=f.n()).done;){var v=m.value;if(v&&v.start&&v.end){var y=this.getCenterPosition(v.start).x-this.canvas.nativeElement.getBoundingClientRect().left,C=this.getCenterPosition(v.start).y-this.canvas.nativeElement.getBoundingClientRect().top,p=this.getCenterPosition(v.end).x-this.canvas.nativeElement.getBoundingClientRect().left,b=this.getCenterPosition(v.end).y-this.canvas.nativeElement.getBoundingClientRect().top;if(v.isCorrect){var w=this.windowWidth()/100*2.4;s(y,C,p,b,w,t[i]),i++,s(y,C,p,b,w=this.windowWidth()/100*2,t[i])}else{var x=this.windowWidth()/100*2.4;s(y,C,p,b,x,n[i]),i++,s(y,C,p,b,x=this.windowWidth()/100*2,n[i])}i=0}}}catch(P){f.e(P)}finally{f.f()}}}},{key:"getUserResult",value:function(e,t){this.exerciseDataService.subject.next({Type:"FindTheNumbers",Order:this.Order,Data:{Order:t,Value:e}})}},{key:"getCenterPosition",value:function(e){var t=e.getBoundingClientRect().width/2,n=e.getBoundingClientRect().height/2,i=e.getBoundingClientRect().top;return{x:e.getBoundingClientRect().left+t,y:i+n}}},{key:"ngAfterViewInit",value:function(){this.canvas.nativeElement.width=this.wrapper.nativeElement.getBoundingClientRect().width,this.canvas.nativeElement.height=this.wrapper.nativeElement.getBoundingClientRect().height;var e=this.canvas.nativeElement.getContext("2d");e.globalAlpha=.5,e.strokeStyle="#664467",e.lineWidth=this.windowWidth()/100*2,e.lineCap="round"}},{key:"setCorrect",value:function(){if(this.isCorrectValues){this.elementsStorage=[],this.count=0;var e,t=_createForOfIteratorHelper(this.list);try{for(t.s();!(e=t.n()).done;){var n=e.value,i=document.getElementById("order_"+n.Order);this.elementsCorrect.push({start:i,end:null,isCorrect:n.IsCorrect});for(var r=n.Order>this.findNumbersArray[0].length?n.Order%this.findNumbersArray[0].length:n.Order,s=Math.floor(n.Order/this.findNumbersArray[0].length),o=0,a=r;a<=this.findNumbersArray[0].length;a++){var l=document.getElementById("order_"+(s*this.findNumbersArray[0].length+a));if(n.CorrectValue[o]!==l.innerText){o=0;break}if(n.CorrectValue.length-1===o){this.elementsCorrect[this.count].end=l;break}o++}if(this.elementsCorrect[this.count].end)this.count++;else{for(var c=r;c>=0;c--){var u=document.getElementById("order_"+(s*this.findNumbersArray[0].length+c));if(n.CorrectValue[o]!==u.innerText){o=0;break}if(n.CorrectValue.length-1===o){this.elementsCorrect[this.count].end=u;break}o++}if(this.elementsCorrect[this.count].end)this.count++;else{for(var h=s;h<=this.findNumbersArray.length;h++){var d=document.getElementById("order_"+(h*this.findNumbersArray[0].length+r));if(n.CorrectValue[o]!==d.innerText){o=0;break}if(n.CorrectValue.length-1===o){this.elementsCorrect[this.count].end=d;break}o++}if(this.elementsCorrect[this.count].end)this.count++;else{for(var g=s;g>=0;g--){var m=document.getElementById("order_"+(g*this.findNumbersArray[0].length+r));if(n.CorrectValue[o]!==m.innerText){o=0;break}if(n.CorrectValue.length-1===o){this.elementsCorrect[this.count].end=m,this.count++;break}o++}this.count++}}}}}catch(f){t.e(f)}finally{t.f()}}this.onResize()}},{key:"windowWidth",value:function(){var e=window,t=document,n=t.documentElement,i=t.getElementsByTagName("body")[0];return e.innerWidth||n.clientWidth||i.clientWidth}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Qb(o.a))},e.\u0275cmp=s.Kb({type:e,selectors:[["app-find-the-numbers"]],viewQuery:function(e,t){var n;1&e&&(s.Hc(a,!0),s.Hc(l,!0)),2&e&&(s.rc(n=s.fc())&&(t.canvas=n.first),s.rc(n=s.fc())&&(t.wrapper=n.first))},inputs:{isCorrectValues:"isCorrectValues",Order:"Order",list:"list"},features:[s.Ab],decls:1,vars:1,consts:[["class","d-flex flex-column w-100 h-100",3,"resize",4,"ngIf"],[1,"d-flex","flex-column","w-100","h-100",3,"resize"],[1,"find-the-numbers__table-wrapper","m-auto"],["wrapper",""],[1,"find-the-numbers__table",3,"mousemove","mousedown","mouseup","touchmove","touchstart","touchend"],["class","find-the-numbers__tr",4,"ngFor","ngForOf"],[1,"canvas"],["canvas",""],[1,"find-the-numbers__tr"],["class","find-the-numbers__td main-f-size",3,"id",4,"ngFor","ngForOf"],[1,"find-the-numbers__td","main-f-size",3,"id"]],template:function(e,t){1&e&&s.Cc(0,h,7,1,"div",0),2&e&&s.kc("ngIf",t.findNumbersArray)},directives:[i.j,i.i],styles:["[_nghost-%COMP%]{width:100%;margin:auto}.find-the-numbers__table-wrapper[_ngcontent-%COMP%]{position:relative;max-width:100%;display:flex;flex-wrap:wrap;padding:0 1vh}.find-the-numbers__correct-value[_ngcontent-%COMP%]{padding:0 .5vh;border-radius:5vh}.find-the-numbers__correct-value[_ngcontent-%COMP%]:not(:last-child){margin-right:1vh}.canvas[_ngcontent-%COMP%]{position:absolute;z-index:-1;top:0;left:0;background:#f1f2f4;border-radius:2vh}.find-the-numbers__td[_ngcontent-%COMP%]{padding:1vh 1vw;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"]}),e}(),g=function(){var e=function(){function e(t){_classCallCheck(this,e),this.componentFactoryResolver=t}return _createClass(e,[{key:"resolveComponent",value:function(){return this.componentFactoryResolver.resolveComponentFactory(d)}}]),e}();return e.\u0275mod=s.Ob({type:e}),e.\u0275inj=s.Nb({factory:function(t){return new(t||e)(s.ac(s.j))},imports:[[i.b,r.n]]}),e}()}}]);